<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrativo - Carrera</title>
    <script>
        if (!sessionStorage.getItem('admin_logged_in')) {
            window.location.href = 'loginadmin.html';
        }
    </script>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>

    <header class="main-header">
        <div class="container header-content">
            <div class="logo-brand">
                <img src="assets/img/logorun.svg" alt="Logo Caminata" class="brand-icon"> 
            </div>
            
            <nav class="main-nav">
                <span style="font-weight:900; font-size:1.2rem; margin-right:20px;">PANEL ADMINISTRATIVO</span>
                <a href="#" class="active">Carreras</a>
                <a href="historial.html">Historial</a>
                <a href="#" onclick="logout()" style="font-size: 0.9rem; color: #c0392b; font-weight:bold;">
                    <i class="fa-solid fa-right-from-bracket"></i> Cerrar SesiÃ³n
                </a>
            </nav>
        </div>
    </header>

    <main class="container">
        <div id="notification-area"></div>
        
        <div class="timer-container">
            <div class="timer-label">
                TIEMPO<br><strong>EN VIVO</strong>
            </div>
            <div class="timer-digits">
                <div class="digit-box" id="hours">00</div>
                <div class="digit-box" id="minutes">00</div>
                <div class="digit-box" id="seconds">00</div>
            </div>
        </div>

        <div class="start-time-config" id="time-config-panel">
            <label><i class="fa-regular fa-clock"></i> Configurar Hora de Salida:</label>
            <div class="time-inputs">
                <input type="number" id="cfg-hh" min="1" max="12" value="08" placeholder="HH">
                <span>:</span>
                <input type="number" id="cfg-mm" min="0" max="59" value="00" placeholder="MM">
                <span>:</span>
                <input type="number" id="cfg-ss" min="0" max="59" value="00" placeholder="SS">
                
                <select id="cfg-ampm">
                    <option value="AM">AM</option>
                    <option value="PM">PM</option>
                </select>
            </div>
        </div>

        <div class="status-bar">
            <span>ESTADO: <span id="status-text">PAUSADA</span></span>
            <span class="status-blue">VELOCIDAD: <span id="speed-text">REAL (x1)</span></span>
        </div>

        <div class="table-container">
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>NOMBRE</th>
                        <th>CI</th>
                        <th>MUNICIPIO</th>
                        <th>EDAD</th>
                        <th>PRESENTE</th>
                        <th></th> 
                    </tr>
                </thead>
                <tbody id="runners-body">
                    </tbody>
            </table>
            <div id="empty-msg" style="text-align:center; padding:20px; color:#666; display:none;">
                No hay corredores inscritos.
            </div>
        </div>

        <div class="admin-controls-grid">
            <button class="btn-admin btn-red" id="btn-start">EMPEZAR CARRERA</button>
            <button class="btn-admin btn-red" id="btn-pause">PAUSAR</button>
            <button class="btn-admin btn-yellow" id="btn-reset">RESETEAR</button>
            
            <button class="btn-admin btn-blue" id="btn-speed-real">VELOCIDAD REAL</button>
            <button class="btn-admin btn-blue" id="btn-speed-10">VELOCIDAD x10</button>
            <button class="btn-admin btn-purple" id="btn-speed-100" style="background-color: #8e44ad; color: white;">VELOCIDAD x100 ðŸš€</button>
            
            <button class="btn-admin btn-blue" id="btn-refresh">REFRESCAR</button>
            <button class="btn-admin btn-yellow" id="btn-load-data">CARGAR TEST</button>
        </div>

    </main>

    <footer class="main-footer">
        <div class="container footer-content">
            <div class="footer-logo">
                <img src="assets/img/logorun.svg" alt="Logo Footer" style="height: 40px; filter: grayscale(100%); opacity: 0.8;">
            </div>
            <div class="footer-text">
                Powered by <b>Anibal GarcÃ­a & Angel Torres</b>
            </div>
        </div>
    </footer>

    <script src="js/admin.js"></script>
    <script>
        function logout() {
                sessionStorage.removeItem('admin_logged_in'); // Borramos la llave
                window.location.href = 'loginadmin.html'; // Mandamos al login
        }
    </script>
    </body>
</html>